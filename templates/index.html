<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ChatGPT</title>
  <style>
    /* Global styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      background-color: #1d1d1d;
      color: #f5f5f5;
      font-family: sans-serif;
      font-size: 16px;
    }
    /* Chat container */
    #chat-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    /* Chat bubble */
    .chat-bubble {
      background-color: #2b2b2b;
      border-radius: 10px;
      margin-bottom: 10px;
      padding: 10px;
      width: 70%;
      float: left;
    }
    .chat-bubble p {
      margin-bottom: 0;
    }
    /* Input field */
    #chat-form {
      bottom: 10px;
      left: 10px;
      right: 10px;
      margin: 10px;
      padding: 40px;
    }
    #chat-input {
      background-color: #2b2b2b;
      border: none;
      border-radius: 20px;
      color: #f5f5f5;
      font-size: 16px;
      padding: 10px 20px;
      width: 70%;
    }
    #chat-input:focus {
      outline: none;
    }
    /* Submit button */
    #chat-submit {
      background-color: #4d4d4d;
      border: none;
      border-radius: 20px;
      color: #f5f5f5;
      cursor: pointer;
      font-size: 16px;
      margin-left: 10px;
      padding: 10px 20px;
    }
    #chat-submit:hover {
      background-color: #6d6d6d;
    }
  </style>
</head>
<body>
  <div id="chat-container"></div>
  <form id="chat-form">
    <input type="text" id="chat-input" placeholder="Type your message here...">
    <button type="submit" id="chat-submit">Send</button>
  </form>
  <script>


// Initialize the previous model response variable with an empty string
let previousResponse = '';

// Get the input field and form element from the HTML
const form = document.querySelector('#chat-form');
const inputField = document.querySelector('#chat-input');



// Add an event listener to the form to handle user input
form.addEventListener('submit', async (event) => {
  event.preventDefault(); // Prevent form submission

  // Get the user input from the input field
  const userInput = inputField.value;

  // Combine the previous response and the new user input
  const text = previousResponse +" "+ userInput;

  // Send the text to the server for processing
  const response = await fetch('/chat', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ text })
  });

  // Get the response from the server
  const data = await response.json();

  // Update the previous response with the new response
  previousResponse = data.response;

  const chatContainer = document.querySelector('#chat-container');
  const chatBubble = document.createElement('div');
  chatBubble.classList.add('chat-bubble');
  chatBubble.innerHTML = `<p><strong>Your Input: </strong> ${userInput}</p><p><strong>TalkGPT: </strong> ${previousResponse}</p>`;
  chatContainer.appendChild(chatBubble);
  

  // Clear the input field
  inputField.value = '';
});
  </script>
</body>
</html>
